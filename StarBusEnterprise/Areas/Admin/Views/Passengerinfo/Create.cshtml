@model StarBusEnterprise.Models.DomainWork.Passengerinfo

<style>
    .form-group {
        color: black;
        border-color: black;
    }
    .form-control {
        border-color: black;
        color: black;
    }
</style>
<div class="container">
  
    <div class="col col-lg-12">
        <h4 style="text-align:center;">StarBus Passenger Info </h4>
        <hr />
    </div>
    <div class="col-md-12">
        <form id="MAnageClient" class="col-md-12">
            @Html.AntiForgeryToken()


            <input type="hidden" name="Id" class="form-control" value="@Model.Id" />
            <input type="hidden" name="Pnr" class="form-control" value="@Model.Pnr" />
            <div class="form-group">
                <label class="control-label" for="CName"> Customer Name</label>
                <input class="form-control" type="text" data-val="true" data-val-length="less data" data-val-length-min="1"
                       data-val-required="The CName field is required." id="CName" name="CName" value="@Model.CName">
                <span class="text-danger field-validation-valid" data-valmsg-for="CName" data-valmsg-replace="true"></span>
            </div>
            <div class="form-group">
                <label class="control-label" for="CPhone"> Customer Phone</label>
                <input class="form-control" type="text" data-val="true" data-val-length="less data" data-val-length-min="1"
                       data-val-required="The CPhone field is required." id="CPhone" name="CPhone" value="@Model.CPhone">
                <span class="text-danger field-validation-valid" data-valmsg-for="CPhone" data-valmsg-replace="true"></span>
            </div>
            <div class="form-group">
                <div class="form-row">
                    <div class="col-md-3">
                        <label class="col-form-label" for="CTo">Customer To:</label>
                    </div>
                    <div class="col-md-8">
                        <select class="form-control" id="CTo" name="CTo" data-val="true" data-val-required="Please Select.">
                            <option selected disabled>--select--</option>
                            @foreach (var item in Model.DestantionTablesList)
                            {
                                <option value="@item.DestinationName" selected="@(item.DestinationName==Model.CTo)">@item.DestinationName</option>
                            }
                        </select>
                        <span class="field-validation-valid text-danger" data-valmsg-for="CTo" data-valmsg-replace="true"></span>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="form-row">
                    <div class="col-md-3">
                        <label class="col-form-label" for="CFrom">Customer From:</label>
                    </div>
                    <div class="col-md-8">
                        <select class="form-control" id="CFrom" name="CFrom" data-val="true" data-val-required="Please Select.">
                            <option selected disabled>--select--</option>
                            @foreach (var item in Model.startFromTablesList)
                            {
                                <option value="@item.StartPoint" selected="@(item.StartPoint==Model.CFrom)">@item.StartPoint</option>
                            }
                        </select>
                        <span class="field-validation-valid text-danger" data-valmsg-for="CFrom" data-valmsg-replace="true"></span>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label" for="CDate"> Customer Date</label>
                <input class="form-control" type="date" data-val="true" data-val-length="less data" data-val-length-min="1"
                       data-val-required="The RatePerSeat RatePerSeat is required." id="CDate" name="CDate" value="@Model.CDate.ToString("yyyy/MM/dd")">
                <span class="text-danger field-validation-valid" data-valmsg-for="CDate" data-valmsg-replace="true"></span>
            </div>
            <div class="form-group">
                <label class="control-label" for="CTime"> Customer Time</label>
                <input class="form-control" type="time" data-val="true" data-val-length="less data"
                       data-val-required="The  CTime is required." id="CTime" name="CTime" value="@Model.CTime">
                <span class="text-danger field-validation-valid" data-valmsg-for="CTime" data-valmsg-replace="true"></span>
            </div>

            <div class="form-group">
                <label class="control-label" for="Totalseat"> Totalseat</label>
                <input class="form-control" type="text" data-val="true" data-val-length="less data"
                       data-val-required="The Totalseat  is required." id="Totalseat" name="Totalseat" value="@Model.Totalseat">
                <span class="text-danger field-validation-valid" data-valmsg-for="Totalseat" data-valmsg-replace="true"></span>
            </div>
            <div class="form-group">
                <label class="control-label" for="Seatnumber"> Seatnumber</label>
                <input class="form-control" type="text" data-val="true" data-val-length="less data" data-val-length-min="1"
                       data-val-required="The Seatnumber  is required." id="Seatnumber" name="Seatnumber" value="@Model.Seatnumber">
                <span class="text-danger field-validation-valid" data-valmsg-for="Seatnumber" data-valmsg-replace="true"></span>
            </div>

            <div class="form-group">
                <label class="control-label" for="Amount"> Amount</label>
                <input class="form-control" type="text" data-val="true" data-val-length="less data" data-val-length-min="1"
                       data-val-required="The Amount  is required." id="Amount" name="Amount" value="@Model.Amount">
                <span class="text-danger field-validation-valid" data-valmsg-for="Amount" data-valmsg-replace="true"></span>
            </div>
            <div class="form-group">
                <label class="control-label" for="AgentId"> AgentId</label>
                <input class="form-control" type="text" data-val="true" data-val-length="less data" data-val-length-min="1"
                       data-val-required="The AgentId  is required." id="AgentId" name="AgentId" value="@Model.AgentId">
                <span class="text-danger field-validation-valid" data-valmsg-for="AgentId" data-valmsg-replace="true"></span>
            </div>
            <div class="form-group">
                <label class="control-label" for="Status"> Status</label>
                <input class="form-control" type="text" data-val="true" data-val-length="less data" data-val-length-min="1"
                       data-val-required="The TimeReach  is required." id="Status" name="Status" value="@Model.Status">
                <span class="text-danger field-validation-valid" data-valmsg-for="Status" data-valmsg-replace="true"></span>
            </div>



            <div class="form-group">


                <a class="btn btn-success btn-group" onclick="saveSpecification()"><i class="fas fa-save"> </i></a>

                <a class="btn btn-danger btn-group" onclick="Delete()"><i class="fas fa-trash-alt"></i></a>
            </div>
        </form>
    </div>
</div>


<script>
    function saveSpecification() {

        var formData1 = $("#MAnageClient").serialize(); const swalWithBootstrapButtons = Swal.mixin({
            customClass: {
                confirmButton: 'btn btn-success',
                cancelButton: 'btn btn-danger'
            },
            buttonsStyling: false
        })
        swalWithBootstrapButtons.fire({
            title: 'Are you sure?',
            text: "You won't Save this!",
            icon: 'success',
            showCancelButton: true,
            confirmButtonText: 'Yes, Save it!',
            cancelButtonText: 'No, cancel!',
            reverseButtons: true
        }).then((result) => {
            if (result.value) {
                event.preventDefault();
                var $daer = $('#MAnageClient');
                if ($daer.valid()) {


                    $.ajax
                        (
                            {
                                url: "/Admin/Passengerinfo/Create/",
                                method: "POST",
                                data: formData1,

                                success: function (data) {


                                    swalWithBootstrapButtons.fire(
                                        'SUccess',
                                        'Yor file is Saved :)'

                                    )
                                        .then(function () {
                                            $("#myModal").modal("hide");
                                            window.location.reload();
                                        });

                                }

                            }
                        );
                }
            }
            else if (
                /* Read more about handling dismissals below */
                result.dismiss === Swal.DismissReason.cancel
            ) {
                $("#myModal").modal("hide");
                swalWithBootstrapButtons.fire(
                    'Cancelled',

                    'error'
                )
            }
        })

    }







    function Delete() {
        var formData1 = $("#MAnageClient").serialize();
        const swalWithBootstrapButtons = Swal.mixin({
            customClass: {
                confirmButton: 'btn btn-success',
                cancelButton: 'btn btn-danger'
            },
            buttonsStyling: false
        })
        swalWithBootstrapButtons.fire({
            title: 'Are you sure?',
            text: "You won't be able to revert this!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonText: 'Yes, delete it!',
            cancelButtonText: 'No, cancel!',
            reverseButtons: true
        }).then((result) => {
            if (result.value) {
                $.ajax(
                    {
                        method: "POST",
                        url: "/Admin/Passengerinfo/DeleteConfirmed/",

                        data: formData1,
                        success: function (result) {


                            $("#myModal").modal("hide");

                            //window.location.reload();
                            swalWithBootstrapButtons.fire(
                                'SUccess',
                                'Yor file is deleted :)'

                            )
                                .then(function () { window.location.reload(); });

                        }

                    });


            }
            else if (
                /* Read more about handling dismissals below */
                result.dismiss === Swal.DismissReason.cancel
            ) {
                $("#myModal").modal("hide");
                swalWithBootstrapButtons.fire(
                    'Cancelled',
                    'Your imaginary file is safe :)',
                    'error'
                )
            }
        })

    }

</script>
<script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>


